---
layout: post
title: a post with code
date: 2015-07-15 15:09:00
description: an example of a blog post with some code
tags: formatting code
categories: sample-posts
---
This theme implements a built-in Jekyll feature, the use of Rouge, for syntax highlighting.
It supports more than 100 languages.
This example is in C++.
All you have to do is wrap your code in a liquid tag:

{% raw  %}
{% highlight c++ linenos %}  <br/> code code code <br/> {% endhighlight %}
{% endraw %}

The keyword `linenos` triggers display of line numbers.
Produces something like this:

{% highlight c++ linenos %}

int main(int argc, char const \*argv[])
{
    string myString;

    cout << "input a string: ";
    getline(cin, myString);
    int length = myString.length();

    char charArray = new char * [length];

    charArray = myString;
    for(int i = 0; i < length; ++i){
        cout << charArray[i] << " ";
    }

    return 0;
}

{% endhighlight %}

Sample R code:

{% highlight r linenos %}

#	Load packages:
pacman::p_load(data.table, dplyr, tidyr, osrm, parallel, rlist)

#	Function to batch generate large driving distance and duration matrices using specified OSRM server:
drive.distance <- function(origin.file, dest.file, chunk.size = 10, server, num.cores = 1, output.dir = NULL) {
	
	#	Load origins data:
	origin.data <- fread(origin.file)
	
	#	Split origins data into chunks:
	nr.origin <- nrow(origin.data)
	origin.chunks <- split(origin.data, rep(1:ceiling(nr.origin/chunk.size), each=chunk.size, length.out=nr.origin))
	
	#	Import destination data:
	dest.data <- fread(dest.file)
	
	#	Set OSRM related options:
	options(osrm.server = server, osrm.profile = "driving")
	
	#	Generate duration and distance matrices for each origin and destination pair:
	matrix <- mclapply(1:length(origin.chunks), function(x){
		osrmTable(src = origin.chunks[[x]], dst = dest.data, measure = c('duration', 'distance'))
	}, mc.cores = num.cores)
	
	#	Construct duration matrix:
	durations <- lapply(matrix, function(x){x$durations}) %>%
		do.call(rbind,.) %>%
		data.table(.)
	durations[,origin.id := origin.data$origin.id]
	
	#	Construct distance matrix:
	distances <- lapply(matrix, function(x){x$distances}) %>%
		do.call(rbind,.) %>%
		data.table(.)
	distances[,origin.id := origin.data$origin.id]
	
	#	If requested, write files to given directory:
	if (!is.null(output.dir)) {
		output1.filename <- paste0(output.dir, "driving_durations.csv")
		output2.filename <- paste0(output.dir, "driving_distances.csv")
		fwrite(durations, output1.filename)
		fwrite(distances, output2.filename)
	} else {
		return(list(distances, durations))
	}
}

{% endhighlight %}
